<lu-main-layout footerSticky>
  <ng-container mainLayoutHeader>
    <lu-page-header
      label="Furniture checklist"
      description="Une checklist de meubles disponibles dans Palia."
      container
    >
    </lu-page-header>
  </ng-container>

  <lu-main-layout-block>
    <lu-container class="pr-u-displayFlex pr-u-flexDirectionColumn pr-u-gap200">
      <lu-filter-bar>
        <lu-segmented-control
          *luFilterPillAddonBefore
          small
          [(ngModel)]="missingFilter"
          [ngModelOptions]="{ standalone: true }"
          (ngModelChange)="missingFilter.set($event)"
        >
          <lu-segmented-control-filter [label]="labelAll" [value]="false" />
          <lu-segmented-control-filter [label]="labelMissing" [value]="true" />
          <ng-template #labelAll>Tous <lu-numeric-badge [value]="1000" /></ng-template>
          <ng-template #labelMissing>Manquants <lu-numeric-badge [value]="1000" /></ng-template>
        </lu-segmented-control>
        <lu-filter-pill label="Collections" name="collections">
          <lu-multi-select
            [(ngModel)]="collectionsFilter"
            [ngModelOptions]="{ standalone: true }"
            (ngModelChange)="collectionsFilter.set($event)"
          />
        </lu-filter-pill>
        <lu-form-field label="Recherche" hiddenLabel>
          <lu-text-input
            placeholder="Rechercher..."
            [(ngModel)]="searchFilter"
            [ngModelOptions]="{ standalone: true }"
            (ngModelChange)="searchFilter.set($event)"
            hasSearchIcon
            hasClearer
          />
        </lu-form-field>
      </lu-filter-bar>

      @if (filteredCollections().length > 0) {
        @for (collection of filteredCollections(); track $index) {
          <lu-box neutral class="pr-u-displayFlex pr-u-flexDirectionColumn pr-u-gap200">
            <lu-divider>
              <h2>{{ collection.name }}</h2>
            </lu-divider>
            <lu-grid columns="4">
              @for (furniture of collection.items; track $index) {
                <lu-grid-column>
                  <div
                    class="dashboard-card card mod-action"
                    [style.border-left-color]="'var(--palettes-' + collection.palette + '-' + collection.color + ')'"
                  >
                    <div class="pr-u-displayFlex pr-u-gap200">
                      <img [src]="furniture.image" height="72" width="72" />
                      <h3>{{ furniture.name }}</h3>
                      <lu-form-field class="dashboard-card-checkbox" label="Crafted" hiddenLabel>
                        <lu-checkbox-input [ngModel]="false" checklist />
                      </lu-form-field>
                    </div>
                  </div>
                </lu-grid-column>
              }
            </lu-grid>
          </lu-box>
        }
      } @else {
        <lu-box neutral>
          <lu-empty-state-section
            hx="3"
            icon="https://cdn.lucca.fr/lucca-front/assets/empty-states/icons/iconSearch.svg"
            heading="Aucun résultat"
            description="Peut-être modifier les filtres de recherche ?"
            palette="product"
          >
          </lu-empty-state-section>
        </lu-box>
      }
    </lu-container>
  </lu-main-layout-block>
</lu-main-layout>
